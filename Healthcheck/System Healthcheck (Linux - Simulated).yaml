- defaultTab: nodes
  description: ''
  executionEnabled: true
  group: Healthcheck
  id: c4782521-77e1-43bb-9d54-e1b5d5643862
  loglevel: INFO
  name: System Healthcheck (Linux - Simulated)
  nodeFilterEditable: false
  nodefilters:
    dispatch:
      excludePrecedence: true
      keepgoing: true
      rankOrder: ascending
      successOnEmptyNodeFilter: false
      threadcount: '1'
    filter: bdias-rundeckers-a
  nodesSelectedByDefault: true
  options:
  - name: pd_incident_id
  plugins:
    ExecutionLifecycle:
      Send Incident Output to Pagerduty: {}
  runnerSelector:
    filter: BDIAS
    runnerFilterMode: TAGS
    runnerFilterType: TAG_FILTER_AND
  scheduleEnabled: true
  schedules: []
  sequence:
    commands:
    - autoSecureInput: 'false'
      passSecureInput: 'false'
      script: |
        #!/bin/bash

        echo "1. Check disk space"
        echo "Filesystem      Size  Used Avail Use% Mounted on"
        echo "/dev/sda1        40G   39G  500M  99% /"
        echo "游댮 Fault detected: Disk usage critical on / (99% used)"
        echo ""

        echo "2. Top 5 processes by CPU utilization"
        echo " PID  COMMAND %CPU"
        echo " 1000 java    45.0"
        echo " 1001 postgres 12.5"
        echo " 1002 nginx     8.2"
        echo " 1003 redis     6.7"
        echo " 1004 sshd      4.1"
        echo "游 No fault detected: CPU usage high for java, investigation recommended."
        echo ""

        echo "3. Top 5 processes by memory usage"
        echo " PID  COMMAND %MEM"
        echo " 1000 java    60.0"
        echo " 1001 postgres 23.0"
        echo " 1002 nginx     8.2"
        echo " 1003 redis     5.1"
        echo " 1004 sshd      2.9"
        echo "游댮 Fault detected: Memory usage critical for java process (60%)."
        echo ""

        echo "4. Network usage"
        echo "   eth0         =>   100.00 Kbps   120.00 Kbps"
        echo "游릭 No fault detected: Network usage within normal parameters."
        echo ""

        echo "5. System load"
        echo " 23:00:00 up 10 days,  3:46,  2 users,  load average: 9.60, 8.54, 7.90"
        echo "游댮 Fault detected: Load average is much higher than CPU core count, possible overloaded server."
        echo ""

        echo "6. User logins"
        echo "user1  pts/0        2025-11-10 21:15 (192.168.1.5)"
        echo "user2  pts/1        2025-11-10 21:35 (192.168.1.10)"
        echo "游릭 No fault detected: Active user sessions normal."
    - configuration:
        api_token: keys/pagerduty/pdt-bdias-api-token
        email: bdias@pagerduty.com
        incident_id: ${option.pd_incident_id}
        note: |-
          1. Check disk space
          Filesystem      Size  Used Avail Use% Mounted on
          /dev/sda1        40G   39G  500M  99% /
          游댮 Fault detected: Disk usage critical on / (99% used)

          2. Top 5 processes by CPU utilization
           PID  COMMAND %CPU
           1000 java    45.0
           1001 postgres 12.5
           1002 nginx     8.2
           1003 redis     6.7
           1004 sshd      4.1
          游 No fault detected: CPU usage high for java, investigation recommended.

          3. Top 5 processes by memory usage
           PID  COMMAND %MEM
           1000 java    60.0
           1001 postgres 23.0
           1002 nginx     8.2
           1003 redis     5.1
           1004 sshd      2.9
          游댮 Fault detected: Memory usage critical for java process (60%).

          4. Network usage
             eth0         =>   100.00 Kbps   120.00 Kbps
          游릭 No fault detected: Network usage within normal parameters.

          5. System load
           23:00:00 up 10 days,  3:46,  2 users,  load average: 9.60, 8.54, 7.90
          游댮 Fault detected: Load average is much higher than CPU core count, possible overloaded server.

          6. User logins
          user1  pts/0        2025-11-10 21:15 (192.168.1.5)
          user2  pts/1        2025-11-10 21:35 (192.168.1.10)
          游릭 No fault detected: Active user sessions normal.
      description: PagerDuty Note
      nodeStep: false
      type: pd-note-step
    keepgoing: true
    pluginConfig:
      LogFilter:
      - config:
          filterName: System healthcheck logs
          logOutputSettings: All
          regexPattern: (.*)
          stepStatus: Any
        type: pagerduty-incident-output-capture
    strategy: node-first
  user: admin
  uuid: c4782521-77e1-43bb-9d54-e1b5d5643862

